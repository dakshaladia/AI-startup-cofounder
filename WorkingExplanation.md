# AI Startup Co-Founder - System Architecture & Flow

## ğŸ—ï¸ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER INTERFACE                              â”‚
â”‚                     Next.js Frontend (Port 3000)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Generate   â”‚  â”‚   Timeline   â”‚  â”‚   Artifacts  â”‚             â”‚
â”‚  â”‚     Ideas    â”‚  â”‚     View     â”‚  â”‚    Viewer    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTP/REST API
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND API LAYER                               â”‚
â”‚                  FastAPI Backend (Port 8000)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   /generate  â”‚  â”‚   /iterate   â”‚  â”‚   /feedback  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ORCHESTRATION LAYER                               â”‚
â”‚                 Orchestrator Service                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Multi-Agent Pipeline Coordinator                    â”‚           â”‚
â”‚  â”‚  - Manages agent execution flow                      â”‚           â”‚
â”‚  â”‚  - Handles data transformation                       â”‚           â”‚
â”‚  â”‚  - Coordinates persistence                           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI AGENTS LAYER                                 â”‚
â”‚                    Gemini 2.0 Flash Lite                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Market     â”‚â†’ â”‚     Idea     â”‚â†’ â”‚    Critic    â”‚             â”‚
â”‚  â”‚   Analyst    â”‚  â”‚  Generator   â”‚  â”‚    Agent     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                            â”‚                         â”‚
â”‚                                            â–¼                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Synthesizer  â”‚â† â”‚   Product    â”‚â† â”‚   Evaluator  â”‚             â”‚
â”‚  â”‚    Agent     â”‚  â”‚  Manager     â”‚  â”‚   (Scores)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERSISTENCE LAYER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  PostgreSQL  â”‚  â”‚    Redis     â”‚  â”‚    FAISS     â”‚             â”‚
â”‚  â”‚  (Metadata)  â”‚  â”‚   (Queue)    â”‚  â”‚  (Vectors)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Idea Generation Flow

### **Step-by-Step Process:**

```
USER ACTION: Enter topic "AI-powered fitness apps"
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. FRONTEND (page.tsx - handleIdeaGeneration)                       â”‚
â”‚    - User enters topic and optional constraints                     â”‚
â”‚    - Clicks "Generate Ideas" button                                 â”‚
â”‚    - POST request to /api/v1/ideas/generate                         â”‚
â”‚    - Shows loading state with animation                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. BACKEND API (ideas.py - generate_ideas)                          â”‚
â”‚    - Receives: { topic, constraints, num_ideas: 2 }                 â”‚
â”‚    - Creates Orchestrator instance                                  â”‚
â”‚    - Calls orchestrator.generate_ideas()                            â”‚
â”‚    - Returns: { ideas: [...], generation_id, created_at }           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ORCHESTRATOR (orchestrator.py - generate_ideas)                  â”‚
â”‚    Phase 1: Market Analysis                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ _run_market_analyst()                   â”‚                      â”‚
â”‚    â”‚ â€¢ Analyzes market size                  â”‚                      â”‚
â”‚    â”‚ â€¢ Identifies competition level          â”‚                      â”‚
â”‚    â”‚ â€¢ Finds key trends                      â”‚                      â”‚
â”‚    â”‚ â€¢ Defines target segments               â”‚                      â”‚
â”‚    â”‚ â€¢ Returns: market_analysis dict         â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â–¼                                           â”‚
â”‚    Phase 2: Idea Generation                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ _run_idea_generator()                   â”‚                      â”‚
â”‚    â”‚ â€¢ Calls Gemini with topic + analysis   â”‚                      â”‚
â”‚    â”‚ â€¢ Generates 2 startup ideas             â”‚                      â”‚
â”‚    â”‚ â€¢ Creates IdeaSnapshot objects          â”‚                      â”‚
â”‚    â”‚ â€¢ Sets initial scores (0.7-0.8)        â”‚                      â”‚
â”‚    â”‚ â€¢ Returns: List[IdeaSnapshot]           â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â–¼                                           â”‚
â”‚    Phase 3: Refinement Loop (for each idea)                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ FOR EACH IDEA:                          â”‚                      â”‚
â”‚    â”‚   â”‚                                      â”‚                      â”‚
â”‚    â”‚   â”œâ”€â–º _run_critic()                     â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Identifies strengths            â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Points out weaknesses           â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Suggests improvements           â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Lists risks & opportunities     â”‚                      â”‚
â”‚    â”‚   â”‚                                      â”‚                      â”‚
â”‚    â”‚   â”œâ”€â–º _run_pm_refiner()                 â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Creates MVP feature list        â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Defines timeline (3-6 months)   â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Specifies required resources    â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Writes user stories             â”‚                      â”‚
â”‚    â”‚   â”‚   â€¢ Sets development priorities     â”‚                      â”‚
â”‚    â”‚   â”‚                                      â”‚                      â”‚
â”‚    â”‚   â””â”€â–º _run_synthesizer()                â”‚                      â”‚
â”‚    â”‚       â€¢ Creates final concept           â”‚                      â”‚
â”‚    â”‚       â€¢ Defines value proposition       â”‚                      â”‚
â”‚    â”‚       â€¢ Specifies business model        â”‚                      â”‚
â”‚    â”‚       â€¢ Plans go-to-market strategy     â”‚                      â”‚
â”‚    â”‚       â€¢ Projects 3-year revenue         â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚                          â–¼                                           â”‚
â”‚    Phase 4: Persistence                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ persistence.save_idea_snapshot()        â”‚                      â”‚
â”‚    â”‚ â€¢ Stores in in-memory dict              â”‚                      â”‚
â”‚    â”‚ â€¢ Saves to vector store (for search)    â”‚                      â”‚
â”‚    â”‚ â€¢ Logs analytics event                  â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. RESPONSE TO FRONTEND                                              â”‚
â”‚    - Returns enriched ideas with all agent outputs                  â”‚
â”‚    - Frontend updates state: setGeneratedIdeas(ideas)               â”‚
â”‚    - Displays beautiful cards with scores and insights              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Idea Iteration Flow

### **When User Wants to Improve an Idea:**

```
USER ACTION: Clicks "Iterate on Idea"
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. FRONTEND - Modal Dialog Opens                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ User sees iteration dialog:             â”‚                      â”‚
â”‚    â”‚ â€¢ Dropdown: What to improve?            â”‚                      â”‚
â”‚    â”‚   - Overall Synthesis                   â”‚                      â”‚
â”‚    â”‚   - Product Refinement                  â”‚                      â”‚
â”‚    â”‚   - Critical Analysis                   â”‚                      â”‚
â”‚    â”‚   - Market Analysis                     â”‚                      â”‚
â”‚    â”‚ â€¢ Textarea: Feedback/Direction          â”‚                      â”‚
â”‚    â”‚   "Focus on enterprise customers"       â”‚                      â”‚
â”‚    â”‚ â€¢ Button: Apply Changes                 â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. FRONTEND - API Call (handleIterateIdea)                          â”‚
â”‚    POST /api/v1/ideas/iterate                                       â”‚
â”‚    {                                                                 â”‚
â”‚      idea_id: "4cff117d-...",                                       â”‚
â”‚      feedback: "Focus on enterprise customers",                     â”‚
â”‚      iteration_type: "synthesis",                                   â”‚
â”‚      focus_areas: [],                                               â”‚
â”‚      constraints: {}                                                 â”‚
â”‚    }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. BACKEND API (ideas.py - iterate_idea)                            â”‚
â”‚    Step 1: Fetch existing idea                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ existing_idea = persistence.get_idea()  â”‚                      â”‚
â”‚    â”‚ â€¢ Retrieves from in-memory store        â”‚                      â”‚
â”‚    â”‚ â€¢ Validates idea exists (404 if not)    â”‚                      â”‚
â”‚    â”‚ â€¢ Returns full IdeaSnapshot with:       â”‚                      â”‚
â”‚    â”‚   - title, description                  â”‚                      â”‚
â”‚    â”‚   - market_analysis (dict)              â”‚                      â”‚
â”‚    â”‚   - all scores                          â”‚                      â”‚
â”‚    â”‚   - all agent outputs                   â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚    Step 2: Call orchestrator                                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ improved_idea = orchestrator.iterate()  â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ORCHESTRATOR (orchestrator.py - iterate_idea)                    â”‚
â”‚    Step 1: Deep copy existing idea                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ new_idea = idea.model_copy(deep=True)   â”‚                      â”‚
â”‚    â”‚ â€¢ Preserves all fields                  â”‚                      â”‚
â”‚    â”‚ â€¢ Increments version number             â”‚                      â”‚
â”‚    â”‚ â€¢ Sets status to REFINING               â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚    Step 2: Apply iteration based on type                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ IF iteration_type == "synthesis":       â”‚                      â”‚
â”‚    â”‚   synthesizer_output =                  â”‚                      â”‚
â”‚    â”‚     _run_synthesizer(idea,              â”‚                      â”‚
â”‚    â”‚       market_analysis,                  â”‚                      â”‚
â”‚    â”‚       refined_idea,                     â”‚                      â”‚
â”‚    â”‚       feedback)                         â”‚                      â”‚
â”‚    â”‚   â€¢ Gemini receives:                    â”‚                      â”‚
â”‚    â”‚     - Original idea                     â”‚                      â”‚
â”‚    â”‚     - Market context                    â”‚                      â”‚
â”‚    â”‚     - PM refinements                    â”‚                      â”‚
â”‚    â”‚     - User feedback                     â”‚                      â”‚
â”‚    â”‚   â€¢ Generates improved synthesis        â”‚                      â”‚
â”‚    â”‚   â€¢ Updates synthesizer_output field    â”‚                      â”‚
â”‚    â”‚                                          â”‚                      â”‚
â”‚    â”‚ ELSE IF iteration_type == "refinement": â”‚                      â”‚
â”‚    â”‚   pm_refiner_output = ...              â”‚                      â”‚
â”‚    â”‚                                          â”‚                      â”‚
â”‚    â”‚ ELSE IF iteration_type == "critique":   â”‚                      â”‚
â”‚    â”‚   critic_output = ...                   â”‚                      â”‚
â”‚    â”‚                                          â”‚                      â”‚
â”‚    â”‚ ELSE IF iteration_type == "market_...": â”‚                      â”‚
â”‚    â”‚   market_analysis = ...                 â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚    Step 3: Recalculate scores                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ _recalculate_scores()                   â”‚                      â”‚
â”‚    â”‚ â€¢ Gemini evaluates updated idea         â”‚                      â”‚
â”‚    â”‚ â€¢ Returns new scores                    â”‚                      â”‚
â”‚    â”‚ â€¢ Fallback: keeps existing scores       â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚                                           â”‚
â”‚    Step 4: Save & return                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ persistence.save_idea_snapshot()        â”‚                      â”‚
â”‚    â”‚ â€¢ Updates in-memory store               â”‚                      â”‚
â”‚    â”‚ â€¢ Logs analytics event                  â”‚                      â”‚
â”‚    â”‚ â€¢ Sets status to COMPLETED              â”‚                      â”‚
â”‚    â”‚ â€¢ Returns improved IdeaSnapshot         â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. RESPONSE & UI UPDATE                                              â”‚
â”‚    Backend returns:                                                  â”‚
â”‚    {                                                                 â”‚
â”‚      updated_idea: { ...with new synthesizer_output... },           â”‚
â”‚      iteration_id: "uuid",                                          â”‚
â”‚      created_at: "timestamp"                                         â”‚
â”‚    }                                                                 â”‚
â”‚                          â”‚                                           â”‚
â”‚    Frontend updates:                                                 â”‚
â”‚    â€¢ Updates idea in generatedIdeas list                            â”‚
â”‚    â€¢ Updates selectedIdea to show new data                          â”‚
â”‚    â€¢ Closes iteration dialog                                        â”‚
â”‚    â€¢ Shows success message                                          â”‚
â”‚    â€¢ User sees updated synthesizer output immediately               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– AI Agent Pipeline Details

### **AI Model Configuration:**

All agents use **Google Gemini 2.0 Flash Lite** via the `google-generativeai` Python SDK.

```python
# Configuration in services/backend/app/core/config.py
LLM_PROVIDER: str = "gemini"
LLM_MODEL: str = "gemini-2.0-flash-lite"
LLM_TEMPERATURE: float = 0.7
LLM_MAX_TOKENS: int = 4000
```

**Why Gemini 2.0 Flash Lite?**

| Feature | Benefit |
|---------|---------|
| **Cost Efficiency** | 80% cheaper than GPT-4, perfect for iterative multi-agent systems |
| **Speed** | 2-3 second response time, enables real-time user experience |
| **1M Token Context** | Can process entire market research documents + all agent outputs |
| **JSON Mode** | Native structured output support for consistent agent responses |
| **Multimodal** | Future-ready for image/video analysis (mockups, competitor apps) |
| **Function Calling** | Enables tool use for web search, data analysis |

**Agent Implementation Pattern:**
```python
import google.generativeai as genai

genai.configure(api_key=settings.GEMINI_API_KEY)
model = genai.GenerativeModel(settings.LLM_MODEL)

response = await asyncio.to_thread(
    model.generate_content,
    prompt,
)

raw_text = response.text
# Parse JSON from response
parsed = json.loads(raw_text)
```

### **Each Agent's Role:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. MARKET ANALYST AGENT                                             â”‚
â”‚    Model: Gemini 2.0 Flash Lite                                     â”‚
â”‚    Location: orchestrator.py -> _run_market_analyst()               â”‚
â”‚    Temperature: 0.7 (balanced creativity + accuracy)                â”‚
â”‚                                                                      â”‚
â”‚    Input: Topic ("AI-powered fitness apps")                         â”‚
â”‚    Prompt: "Analyze market for: {topic}"                           â”‚
â”‚    Output: {                                                        â”‚
â”‚      market_size: "Medium",                                         â”‚
â”‚      competition_level: "High",                                     â”‚
â”‚      growth_potential: "Medium",                                    â”‚
â”‚      key_trends: [                                                  â”‚
â”‚        "Personalized AI workout plans",                             â”‚
â”‚        "Wearable device integration",                               â”‚
â”‚        "Virtual coaching with feedback",                            â”‚
â”‚        "Gamification and social features"                           â”‚
â”‚      ],                                                             â”‚
â”‚      target_segments: ["Beginners", "Budget-conscious", ...],      â”‚
â”‚      market_opportunity: "Create affordable AI fitness...",         â”‚
â”‚      competitive_landscape: "Crowded with Strava, Peloton..."      â”‚
â”‚    }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. IDEA GENERATOR AGENT                                             â”‚
â”‚    Model: Gemini 2.0 Flash Lite                                     â”‚
â”‚    Location: orchestrator.py -> _run_idea_generator()               â”‚
â”‚    Temperature: 0.7 (creative idea generation)                      â”‚
â”‚                                                                      â”‚
â”‚    Input: Topic + Market Analysis                                   â”‚
â”‚    Prompt: "Generate 2 startup ideas for: {topic}                  â”‚
â”‚            Market analysis: {analysis}                              â”‚
â”‚            Each idea: title (<= 12 words),                          â”‚
â”‚                      description (<= 2 sentences)"                  â”‚
â”‚    Output: [                                                        â”‚
â”‚      {                                                              â”‚
â”‚        title: "AI Fitness Buddy: Personalized Workouts...",        â”‚
â”‚        description: "An AI app generating customized..."           â”‚
â”‚      },                                                             â”‚
â”‚      { ...idea 2... }                                               â”‚
â”‚    ]                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. CRITIC AGENT                                                     â”‚
â”‚    Model: Gemini 2.0 Flash Lite                                     â”‚
â”‚    Location: orchestrator.py -> _run_critic()                       â”‚
â”‚    Temperature: 0.7 (analytical + constructive feedback)            â”‚
â”‚                                                                      â”‚
â”‚    Input: IdeaSnapshot                                              â”‚
â”‚    Prompt: "Critique this idea: {title}, {description}"            â”‚
â”‚    Output: {                                                        â”‚
â”‚      strengths: [                                                   â”‚
â”‚        "Addresses growing market for AI fitness",                   â”‚
â”‚        "Combines tracking + coaching in one app",                   â”‚
â”‚        "Targets affordability and accessibility"                    â”‚
â”‚      ],                                                             â”‚
â”‚      weaknesses: [                                                  â”‚
â”‚        "Highly competitive market",                                 â”‚
â”‚        "Dependence on accurate AI algorithms",                      â”‚
â”‚        "User engagement challenges"                                 â”‚
â”‚      ],                                                             â”‚
â”‚      suggestions: [                                                 â”‚
â”‚        "Focus on specific niche (bodyweight training)",             â”‚
â”‚        "Develop intuitive UX",                                      â”‚
â”‚        "Partner with wearable manufacturers"                        â”‚
â”‚      ],                                                             â”‚
â”‚      risks: [...],                                                  â”‚
â”‚      opportunities: [...]                                           â”‚
â”‚    }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. PM REFINER AGENT                                                 â”‚
â”‚    Model: Gemini 2.0 Flash Lite                                     â”‚
â”‚    Location: orchestrator.py -> _run_pm_refiner()                   â”‚
â”‚    Temperature: 0.7 (strategic planning + prioritization)           â”‚
â”‚                                                                      â”‚
â”‚    Input: IdeaSnapshot + Critique + Constraints                     â”‚
â”‚    Prompt: "Refine from PM perspective:                            â”‚
â”‚            Idea: {idea}, Critique: {critique}"                      â”‚
â”‚    Output: {                                                        â”‚
â”‚      refinements: [                                                 â”‚
â”‚        "Focus on bodyweight workouts",                              â”‚
â”‚        "Strong social challenge feature",                           â”‚
â”‚        "Simple nutrition tracking"                                  â”‚
â”‚      ],                                                             â”‚
â”‚      priorities: [                                                  â”‚
â”‚        "Develop AI algorithm for workout plans",                    â”‚
â”‚        "Build social challenge system",                             â”‚
â”‚        "Design mobile app UI/UX"                                    â”‚
â”‚      ],                                                             â”‚
â”‚      timeline: "3-6 months",                                        â”‚
â”‚      resources: [                                                   â”‚
â”‚        "Lead Developer (Backend & AI)",                             â”‚
â”‚        "Mobile App Developer",                                      â”‚
â”‚        "UI/UX Designer"                                             â”‚
â”‚      ],                                                             â”‚
â”‚      features: [                                                    â”‚
â”‚        "Personalized workout generation",                           â”‚
â”‚        "Workout logging and tracking",                              â”‚
â”‚        "Social challenges with friends",                            â”‚
â”‚        "Progress visualization",                                    â”‚
â”‚        "Gamification (badges, leaderboards)"                        â”‚
â”‚      ],                                                             â”‚
â”‚      user_stories: [                                                â”‚
â”‚        "As a user, I want personalized workouts...",                â”‚
â”‚        "As a user, I want to join challenges..."                    â”‚
â”‚      ],                                                             â”‚
â”‚      success_metrics: [                                             â”‚
â”‚        "Monthly Active Users (MAU)",                                â”‚
â”‚        "User retention rate (30 days)",                             â”‚
â”‚        "Challenges created/joined"                                  â”‚
â”‚      ]                                                              â”‚
â”‚    }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. SYNTHESIZER AGENT                                                â”‚
â”‚    Model: Gemini 2.0 Flash Lite                                     â”‚
â”‚    Location: orchestrator.py -> _run_synthesizer()                  â”‚
â”‚    Temperature: 0.7 (comprehensive synthesis + business planning)   â”‚
â”‚                                                                      â”‚
â”‚    Input: IdeaSnapshot + Market Analysis + PM Refinements           â”‚
â”‚    Prompt: "Synthesize final concept:                              â”‚
â”‚            Idea: {idea}                                             â”‚
â”‚            Market: {market}                                         â”‚
â”‚            Refinements: {refinements}"                              â”‚
â”‚    Output: {                                                        â”‚
â”‚      final_concept: "AI-Powered Fitness Buddy is a mobile...",     â”‚
â”‚      key_features: [                                                â”‚
â”‚        "AI-powered workout generation",                             â”‚
â”‚        "Progress tracking with charts",                             â”‚
â”‚        "Social challenges",                                         â”‚
â”‚        "Gamification elements"                                      â”‚
â”‚      ],                                                             â”‚
â”‚      business_model: "Freemium with in-app purchases",              â”‚
â”‚      go_to_market: "Social media marketing (Instagram,             â”‚
â”‚                     TikTok), App store optimization,                â”‚
â”‚                     Content marketing, Partnerships",               â”‚
â”‚      value_proposition: "Get personalized workouts, stay            â”‚
â”‚                          motivated with social challenges,          â”‚
â”‚                          track progress - all affordable",          â”‚
â”‚      competitive_advantage: "Personalized bodyweight plans,         â”‚
â”‚                             strong social system,                   â”‚
â”‚                             intuitive UX,                           â”‚
â”‚                             affordable pricing",                    â”‚
â”‚      target_customers: [                                            â”‚
â”‚        "Budget-conscious fitness enthusiasts",                      â”‚
â”‚        "At-home workout seekers",                                   â”‚
â”‚        "Data-driven fitness trackers"                               â”‚
â”‚      ],                                                             â”‚
â”‚      revenue_projections: {                                         â”‚
â”‚        year1: { users: 50000, revenue: "$150,000" },                â”‚
â”‚        year2: { users: 250000, revenue: "$1,050,000" },             â”‚
â”‚        year3: { users: 750000, revenue: "$6,300,000" }              â”‚
â”‚      }                                                              â”‚
â”‚    }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Data Flow & State Management

### **Frontend State:**

```javascript
// Main component state
const [generatedIdeas, setGeneratedIdeas] = useState([])
// Structure:
// [
//   {
//     id: "uuid",
//     title: "Idea Title",
//     description: "Description",
//     market_analysis: { ... },
//     feasibility_score: 0.7,
//     novelty_score: 0.8,
//     market_signal_score: 0.6,
//     overall_score: 0.7,
//     critic_output: { strengths, weaknesses, suggestions },
//     pm_refiner_output: { features, timeline, resources },
//     synthesizer_output: { final_concept, business_model }
//   }
// ]

const [selectedIdea, setSelectedIdea] = useState(null)
// Currently viewed idea in modal

const [showIterateDialog, setShowIterateDialog] = useState(false)
// Controls iteration dialog visibility

const [iterateFeedback, setIterateFeedback] = useState('')
const [iterationType, setIterationType] = useState('synthesis')
// User's iteration inputs
```

### **Backend State (In-Memory Storage):**

```python
# Class-level storage in PersistenceService
_ideas_store: Dict[str, Dict[str, Any]] = {
    "idea-uuid-1": {
        "id": "idea-uuid-1",
        "title": "AI Fitness Buddy",
        "description": "...",
        "market_analysis": { ... },
        "feasibility_score": 0.7,
        ...all other fields...
    },
    "idea-uuid-2": { ... }
}

# Persists across all Orchestrator instances
# Enables iteration to fetch previously generated ideas
```

---

## ğŸ¨ UI Component Hierarchy

```
page.tsx (Main Page)
â”‚
â”œâ”€â–º Header
â”‚   â”œâ”€â–º Logo: "Startup Co-Founder"
â”‚   â””â”€â–º Navigation: Generate | Upload | Timeline | Artifacts
â”‚
â”œâ”€â–º Main Content (Conditional based on activeTab)
â”‚   â”‚
â”‚   â”œâ”€â–º IF activeTab === 'generate':
â”‚   â”‚   â”œâ”€â–º IdeaGenerator Component
â”‚   â”‚   â”‚   â”œâ”€â–º Topic Input Field
â”‚   â”‚   â”‚   â”œâ”€â–º "Show advanced options" toggle
â”‚   â”‚   â”‚   â”œâ”€â–º Advanced Options (conditional)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â–º Market Focus dropdown
â”‚   â”‚   â”‚   â”‚   â”œâ”€â–º Technology Stack tags
â”‚   â”‚   â”‚   â”‚   â”œâ”€â–º Target Audience input
â”‚   â”‚   â”‚   â”‚   â”œâ”€â–º Budget Range dropdown
â”‚   â”‚   â”‚   â”‚   â””â”€â–º Timeline dropdown
â”‚   â”‚   â”‚   â””â”€â–º "Generate Ideas" button
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â–º Generated Ideas Grid (conditional if ideas exist)
â”‚   â”‚       â”œâ”€â–º Idea Card 1
â”‚   â”‚       â”‚   â”œâ”€â–º Title
â”‚   â”‚       â”‚   â”œâ”€â–º Overall Score Badge
â”‚   â”‚       â”‚   â”œâ”€â–º Description
â”‚   â”‚       â”‚   â”œâ”€â–º Score Metrics (Feasibility, Novelty, Market)
â”‚   â”‚       â”‚   â”œâ”€â–º Agent Status Badges
â”‚   â”‚       â”‚   â”œâ”€â–º Value Proposition Preview
â”‚   â”‚       â”‚   â””â”€â–º "View Full Analysis" button
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â–º Idea Card 2 (same structure)
â”‚   â”‚
â”‚   â”œâ”€â–º IF activeTab === 'timeline':
â”‚   â”‚   â””â”€â–º IdeaTimeline Component
â”‚   â”‚       â””â”€â–º Timeline view of idea evolution
â”‚   â”‚
â”‚   â””â”€â–º IF activeTab === 'artifacts':
â”‚       â””â”€â–º ArtifactViewer Component
â”‚
â”œâ”€â–º Idea Details Modal (conditional if selectedIdea exists)
â”‚   â”œâ”€â–º Header
â”‚   â”‚   â”œâ”€â–º Title
â”‚   â”‚   â”œâ”€â–º Overall Score Badge
â”‚   â”‚   â”œâ”€â–º Status
â”‚   â”‚   â””â”€â–º Close button
â”‚   â”‚
â”‚   â”œâ”€â–º Content Sections
â”‚   â”‚   â”œâ”€â–º Description
â”‚   â”‚   â”œâ”€â–º Score Metrics (3 cards)
â”‚   â”‚   â”œâ”€â–º Market Analysis
â”‚   â”‚   â”‚   â”œâ”€â–º Market Opportunity
â”‚   â”‚   â”‚   â””â”€â–º Key Trends (bullet list)
â”‚   â”‚   â”œâ”€â–º Critic Analysis
â”‚   â”‚   â”‚   â”œâ”€â–º Strengths (âœ“ bullets)
â”‚   â”‚   â”‚   â”œâ”€â–º Weaknesses (âš  bullets)
â”‚   â”‚   â”‚   â””â”€â–º Suggestions (ğŸ’¡ bullets)
â”‚   â”‚   â”œâ”€â–º PM Refinements
â”‚   â”‚   â”‚   â”œâ”€â–º Timeline badge
â”‚   â”‚   â”‚   â”œâ”€â–º MVP Features (âœ“ bullets)
â”‚   â”‚   â”‚   â””â”€â–º Development Priorities (numbered)
â”‚   â”‚   â””â”€â–º Final Synthesis
â”‚   â”‚       â”œâ”€â–º Final Concept
â”‚   â”‚       â”œâ”€â–º Value Proposition
â”‚   â”‚       â”œâ”€â–º Business Model
â”‚   â”‚       â”œâ”€â–º Go-to-Market Strategy
â”‚   â”‚       â””â”€â–º Revenue Projections (3 year cards)
â”‚   â”‚
â”‚   â””â”€â–º Footer Actions
â”‚       â”œâ”€â–º "Close" button
â”‚       â””â”€â–º "Iterate on Idea" button
â”‚
â””â”€â–º Iterate Dialog (conditional if showIterateDialog)
    â”œâ”€â–º Header
    â”‚   â”œâ”€â–º "Iterate on Idea" title
    â”‚   â”œâ”€â–º Idea subtitle
    â”‚   â””â”€â–º Close button
    â”‚
    â”œâ”€â–º Content
    â”‚   â”œâ”€â–º Iteration Type Dropdown
    â”‚   â”‚   â”œâ”€â–º Overall Synthesis
    â”‚   â”‚   â”œâ”€â–º Product Refinement
    â”‚   â”‚   â”œâ”€â–º Critical Analysis
    â”‚   â”‚   â””â”€â–º Market Analysis
    â”‚   â”‚
    â”‚   â””â”€â–º Feedback Textarea
    â”‚       (User enters improvement direction)
    â”‚
    â””â”€â–º Footer Actions
        â”œâ”€â–º "Cancel" button
        â””â”€â–º "Apply Changes" button
```

---

## ğŸ”Œ API Endpoints

### **1. POST /api/v1/ideas/generate**
```
Request:
{
  "topic": string,
  "constraints": object,
  "num_ideas": number (1-10)
}

Response:
{
  "ideas": [IdeaSnapshot, ...],
  "generation_id": string,
  "created_at": timestamp
}

Flow:
1. Validate request
2. Create orchestrator
3. Run multi-agent pipeline
4. Save to persistence
5. Return enriched ideas
```

### **2. POST /api/v1/ideas/iterate**
```
Request:
{
  "idea_id": string,
  "feedback": string,
  "iteration_type": "synthesis" | "refinement" | "critique" | "market_analysis",
  "focus_areas": string[],
  "constraints": object
}

Response:
{
  "updated_idea": IdeaSnapshot,
  "iteration_id": string,
  "created_at": timestamp
}

Flow:
1. Fetch existing idea from persistence
2. Validate idea exists
3. Deep copy idea
4. Run selected agent with feedback
5. Recalculate scores
6. Save updated idea
7. Return improved version
```

---

## âš™ï¸ Technology Stack & Architecture Decisions

### **Frontend Stack**

```
Next.js 14 (App Router)
â”œâ”€â–º Why: Server-side rendering for SEO, React Server Components for performance
â”œâ”€â–º Benefits: Built-in routing, API routes, optimized bundling
â””â”€â–º File: frontend/web/

TypeScript
â”œâ”€â–º Why: Type safety prevents runtime errors, better IDE support
â”œâ”€â–º Benefits: Catches bugs at compile time, self-documenting code
â””â”€â–º Version: Latest (5.x)

Tailwind CSS
â”œâ”€â–º Why: Utility-first CSS, no CSS-in-JS runtime cost
â”œâ”€â–º Benefits: Consistent design system, purges unused styles
â””â”€â–º Config: tailwind.config.js

Framer Motion
â”œâ”€â–º Why: Declarative animations, spring physics
â”œâ”€â–º Benefits: Smooth page transitions, loading states
â””â”€â–º Usage: Modal animations, card transitions

Heroicons
â”œâ”€â–º Why: Official Tailwind icons, tree-shakeable
â”œâ”€â–º Benefits: Consistent with design system, optimized SVGs
â””â”€â–º Version: 2.x (outline variant)
```

**Frontend Architecture Decisions:**

| Decision | Reason | Benefit |
|----------|--------|---------|
| **App Router over Pages** | Modern React patterns, streaming SSR | Better performance, SEO-friendly |
| **Client Components** | Interactive UI, state management | Real-time updates, form handling |
| **No State Library** | Simple state needs | Reduced bundle size, less complexity |
| **Fetch API** | Native browser API | No axios dependency, smaller bundle |
| **CSS-in-Tailwind** | Utility-first approach | Fast development, consistent styling |

### **Backend Stack**

```
FastAPI
â”œâ”€â–º Why: Async support, automatic OpenAPI docs, Pydantic integration
â”œâ”€â–º Benefits: 2-3x faster than Flask, type hints validation
â”œâ”€â–º Version: 0.104.1
â””â”€â–º File: services/backend/

Pydantic v2
â”œâ”€â–º Why: Data validation, serialization, settings management
â”œâ”€â–º Benefits: Type-safe models, automatic JSON parsing
â”œâ”€â–º Version: 2.5.0
â””â”€â–º Usage: IdeaSnapshot, GenerateRequest models

Uvicorn (with uvloop)
â”œâ”€â–º Why: Lightning-fast ASGI server, production-ready
â”œâ”€â–º Benefits: 4x faster than gunicorn, supports HTTP/2
â”œâ”€â–º Workers: Auto-reload in dev, multiple workers in prod
â””â”€â–º Version: 0.24.0

Google Generative AI SDK
â”œâ”€â–º Why: Official Gemini client, optimized for Python
â”œâ”€â–º Benefits: Native async support, streaming, function calling
â”œâ”€â–º Version: 0.8.3
â””â”€â–º Model: gemini-2.0-flash-lite

Asyncio + async/await
â”œâ”€â–º Why: Non-blocking I/O for LLM calls
â”œâ”€â–º Benefits: Handle multiple requests simultaneously
â””â”€â–º Pattern: await asyncio.to_thread() for CPU-bound tasks

Structlog
â”œâ”€â–º Why: Structured logging, JSON output
â”œâ”€â–º Benefits: Easy to parse, searchable in production
â””â”€â–º Version: 23.2.0
```

**Backend Architecture Decisions:**

| Decision | Reason | Benefit |
|----------|--------|---------|
| **FastAPI over Flask** | Async support, auto validation | 3x better performance for LLM calls |
| **Pydantic v2** | Type safety, 5x faster than v1 | Catches errors early, faster serialization |
| **Async Orchestrator** | Multiple LLM calls in parallel | 50% faster idea generation (5 agents) |
| **In-Memory Storage** | Development simplicity | Fast prototyping, easy testing |
| **Class-Level Store** | Persist across instances | Ideas survive between requests |
| **Dependency Injection** | Testability, loose coupling | Easy to mock services in tests |

### **Infrastructure Stack**

```
Docker & Docker Compose
â”œâ”€â–º Why: Consistent dev environment, easy deployment
â”œâ”€â–º Benefits: "Works on my machine" â†’ "Works everywhere"
â”œâ”€â–º Services: 6 containers (frontend, backend, postgres, redis, demo, ingestion)
â””â”€â–º Version: Docker Compose v3.8

PostgreSQL 15
â”œâ”€â–º Why: ACID compliance, JSON support, mature ecosystem
â”œâ”€â–º Benefits: Reliable data storage, complex queries
â”œâ”€â–º Usage: Idea metadata, user data (production)
â””â”€â–º Current: Mock implementation (in-memory for dev)

Redis 7 (Alpine)
â”œâ”€â–º Why: In-memory data store, pub/sub, task queue
â”œâ”€â–º Benefits: Fast caching, background job processing
â”œâ”€â–º Usage: Task queue for async operations
â””â”€â–º Size: 5MB Alpine image

FAISS
â”œâ”€â–º Why: Facebook's vector similarity search, fast
â”œâ”€â–º Benefits: No external dependencies, runs locally
â”œâ”€â–º Usage: Semantic search for similar ideas
â””â”€â–º Type: CPU version (faiss-cpu)

Nginx (Production)
â”œâ”€â–º Why: High-performance reverse proxy
â”œâ”€â–º Benefits: SSL termination, load balancing, caching
â””â”€â–º Future: Will add in production deployment
```

**Infrastructure Architecture Decisions:**

| Decision | Reason | Benefit |
|----------|--------|---------|
| **Docker Compose** | Multi-service orchestration | Single command to start everything |
| **Postgres over MongoDB** | Structured data, relationships | ACID guarantees, complex queries |
| **Redis for Queue** | Fast, lightweight, pub/sub | Async task processing |
| **FAISS over Pinecone** | Local development, no API cost | Free, fast, no network latency |
| **Volume Mounts** | Hot reload in development | Code changes instantly reflected |
| **Health Checks** | Container orchestration | Automatic restarts, dependency ordering |

### **AI/ML Stack**

```
Gemini 2.0 Flash Lite
â”œâ”€â–º Provider: Google AI Studio / Vertex AI
â”œâ”€â–º Context Window: 1,048,576 tokens (1M)
â”œâ”€â–º Output Tokens: 8,192 max
â”œâ”€â–º Cost: $0.075 per 1M input tokens (80% cheaper than GPT-4)
â”œâ”€â–º Speed: 2-3 seconds average response
â”œâ”€â–º Capabilities: Text, JSON, Function calling, Multimodal
â””â”€â–º Why: Best price/performance ratio for multi-agent systems

Temperature: 0.7
â”œâ”€â–º Why: Balanced creativity and consistency
â”œâ”€â–º 0.0 = Deterministic, 1.0 = Creative
â””â”€â–º 0.7 = Good for business ideas (creative but grounded)

Max Tokens: 4000
â”œâ”€â–º Why: Sufficient for detailed responses, cost-effective
â””â”€â–º Agent outputs: 500-2000 tokens typically

JSON Mode
â”œâ”€â–º Why: Structured outputs, easy parsing
â”œâ”€â–º Alternative: Function calling, tool use
â””â”€â–º Parsing: Regex find "{...}" + json.loads()

Error Handling
â”œâ”€â–º Primary: Gemini API call
â”œâ”€â–º Fallback: Mock data with realistic structure
â””â”€â–º Why: Development continuity, graceful degradation
```

**AI Architecture Decisions:**

| Decision | Reason | Benefit |
|----------|--------|---------|
| **Gemini over GPT-4** | 80% cheaper, 2x faster | More iterations per dollar |
| **Flash Lite over Pro** | Speed + cost for simple tasks | Better UX, lower costs |
| **Single Model** | Consistency across agents | Simpler deployment, one API key |
| **Temperature 0.7** | Balanced output | Creative but not random |
| **JSON Parsing** | Structured responses | Type-safe, predictable |
| **Async Calls** | Parallel agent execution | 5x faster than sequential |
| **Fallback Data** | Continue without API | Development without API key |

### **Development Tools**

```
Python 3.12
â”œâ”€â–º Why: Latest stable, performance improvements
â”œâ”€â–º Benefits: Better asyncio, faster dict operations
â””â”€â–º Required for: Pattern matching, walrus operator

Node.js 20 LTS
â”œâ”€â–º Why: Long-term support, stable
â”œâ”€â–º Benefits: ESM support, faster V8
â””â”€â–º Required for: Next.js 14

pnpm (Alternative: npm)
â”œâ”€â–º Why: Faster installs, disk space efficient
â”œâ”€â–º Benefits: Monorepo support, strict mode
â””â”€â–º Optional: Works with npm too

Black (Python formatter)
â”œâ”€â–º Why: Opinionated, no config needed
â”œâ”€â–º Benefits: Consistent code style
â””â”€â–º Version: 23.11.0

ESLint + Prettier
â”œâ”€â–º Why: Catch errors, format code
â”œâ”€â–º Benefits: Consistent JavaScript/TypeScript
â””â”€â–º Config: Next.js recommended rules

pytest
â”œâ”€â–º Why: Most popular Python testing framework
â”œâ”€â–º Benefits: Fixtures, parametrize, async support
â””â”€â–º Version: 7.4.3
```

### **Why This Stack?**

**1. Developer Experience**
- Hot reload in development (frontend + backend)
- Type safety end-to-end (TypeScript + Pydantic)
- Auto-generated API docs (FastAPI Swagger UI)
- Single command to start: `docker-compose up`

**2. Performance**
- Async I/O for LLM calls (FastAPI + asyncio)
- React Server Components (Next.js 14)
- Edge-ready deployment (Vercel, Cloudflare)
- In-memory caching (Redis)

**3. Cost Efficiency**
- Gemini 2.0 Flash Lite: $0.075 per 1M tokens
- FAISS: Free local vector search
- Docker: No expensive managed services in dev
- Serverless-ready: Scale to zero when not in use

**4. Scalability**
- Async orchestrator: Handle 100+ concurrent requests
- Redis queue: Background job processing
- Vector DB: Fast similarity search
- Stateless backend: Horizontal scaling ready

**5. Maintainability**
- Type-safe: TypeScript + Pydantic catch errors early
- Structured logging: Easy debugging in production
- Dependency injection: Testable, modular code
- Docker: Consistent across environments

**6. Future-Proof**
- Multimodal ready: Gemini supports images/video
- Microservices: Each service can scale independently
- API-first: Easy to add mobile app, CLI, etc.
- Embeddings: Vector search for similar ideas

---

## ğŸš€ Deployment Architecture

```
Development (Current):
docker-compose up
â”œâ”€â–º frontend:3000 (Next.js dev server)
â”œâ”€â–º backend:8000 (FastAPI with reload)
â”œâ”€â–º postgres:5432
â”œâ”€â–º redis:6379
â””â”€â–º All services connected via Docker network

Production (Recommended):
â”œâ”€â–º Frontend: Vercel/Netlify
â”œâ”€â–º Backend: AWS ECS/Google Cloud Run
â”œâ”€â–º Database: AWS RDS/Google Cloud SQL
â”œâ”€â–º Redis: AWS ElastiCache/Redis Cloud
â”œâ”€â–º Vector DB: Pinecone/Weaviate Cloud
â””â”€â–º Load Balancer: AWS ALB/Google Cloud Load Balancer
```

---

## ğŸ“Š Key Metrics & Analytics

```
Tracked Events:
â”œâ”€â–º idea_generation (topic, num_ideas)
â”œâ”€â–º idea_iteration (idea_id, iteration_type)
â”œâ”€â–º feedback_submission (idea_id, feedback_type)
â””â”€â–º idea_export (idea_id, export_format)

Computed Metrics:
â”œâ”€â–º feasibility_score (0.0 - 1.0)
â”œâ”€â–º novelty_score (0.0 - 1.0)
â”œâ”€â–º market_signal_score (0.0 - 1.0)
â””â”€â–º overall_score (weighted average)
```

---

## ğŸ” Error Handling

```
Frontend:
â”œâ”€â–º API errors â†’ Alert dialog
â”œâ”€â–º Network errors â†’ "Backend not running" message
â”œâ”€â–º Validation errors â†’ Form field highlights
â””â”€â–º Loading states â†’ Spinners & skeleton screens

Backend:
â”œâ”€â–º Validation errors â†’ 422 Unprocessable Entity
â”œâ”€â–º Not found â†’ 404 with detail message
â”œâ”€â–º LLM failures â†’ Fallback to mock data
â”œâ”€â–º Database errors â†’ 500 with logged stack trace
â””â”€â–º All errors logged with structured logging
```

---

## ğŸ”„ Document Upload & Processing Pipeline

### **Current State: Disconnected from Idea Generation**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DOCUMENT UPLOAD FLOW                              â”‚
â”‚                                                                      â”‚
â”‚ User Uploads Document                                                â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Frontend: UploadArea Component                                  â”‚ â”‚
â”‚ â”‚ â€¢ Drag & drop or click to upload                               â”‚ â”‚
â”‚ â”‚ â€¢ Supports: PDF, images, text documents                      â”‚ â”‚
â”‚ â”‚ â€¢ Shows upload progress                                        â”‚ â”‚
â”‚ â”‚ â€¢ Simulates processing (currently mock)                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ingestion Service (Separate from idea generation)               â”‚ â”‚
â”‚ â”‚ â€¢ PDF Processor: Extracts text, metadata, chunks               â”‚ â”‚
â”‚ â”‚ â€¢ Image Processor: Captions, embeddings, object detection     â”‚ â”‚
â”‚ â”‚ â€¢ News Scraper: Market trends, competitor analysis            â”‚ â”‚
â”‚ â”‚ â€¢ Job Post Processor: Skills demand, salary data              â”‚ â”‚
â”‚ â”‚ â€¢ Output: Structured data with embeddings                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Storage: FAISS Vector Database                                  â”‚ â”‚
â”‚ â”‚ â€¢ Stores document embeddings                                    â”‚ â”‚
â”‚ â”‚ â€¢ Enables semantic search                                      â”‚ â”‚
â”‚ â”‚ â€¢ NOT connected to idea generation pipeline                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **What's Missing: Integration with Idea Generation**

**Current Limitations:**
- âŒ **No Context**: Ideas generated without document insights
- âŒ **No Validation**: Can't validate ideas against uploaded research  
- âŒ **No Enhancement**: Missing opportunity to use rich document data
- âŒ **No Market Intelligence**: Market analysis doesn't use uploaded data

**Required Integration Points:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FUTURE INTEGRATION FLOW                          â”‚
â”‚                                                                      â”‚
â”‚ Document Upload â†’ Processing â†’ Enhanced Idea Generation             â”‚
â”‚         â”‚                â”‚                    â”‚                     â”‚
â”‚         â–¼                â–¼                    â–¼                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Market       â”‚ â”‚ Technical    â”‚ â”‚ Enhanced Agent Prompts     â”‚   â”‚
â”‚ â”‚ Research     â”‚ â”‚ Constraints  â”‚ â”‚ â€¢ Include document context â”‚   â”‚
â”‚ â”‚ Reports      â”‚ â”‚ Documents    â”‚ â”‚ â€¢ Reference specific data  â”‚   â”‚
â”‚ â”‚ News Articlesâ”‚ â”‚ Patents      â”‚ â”‚ â€¢ Validate against sources â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                â”‚                    â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                          â–¼                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Enhanced Market Analysis                                        â”‚ â”‚
â”‚ â”‚ â€¢ Uses uploaded market research                                â”‚ â”‚
â”‚ â”‚ â€¢ References specific competitors from documents              â”‚ â”‚
â”‚ â”‚ â€¢ Incorporates recent trends from news articles                â”‚ â”‚
â”‚ â”‚ â€¢ Validates market size with uploaded reports                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                         â”‚
â”‚                          â–¼                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Context-Aware Idea Generation                                   â”‚ â”‚
â”‚ â”‚ â€¢ Technical feasibility based on uploaded patents/tech docs    â”‚ â”‚
â”‚ â”‚ â€¢ Market validation using uploaded research                     â”‚ â”‚
â”‚ â”‚ â€¢ Competitive analysis from uploaded competitor data           â”‚ â”‚
â”‚ â”‚ â€¢ Revenue projections based on uploaded market data            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Model Selection & Configuration

### **Per-Agent Model Selection**

The system supports different AI models for each agent through the Settings interface:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MODEL SELECTION INTERFACE                        â”‚
â”‚                                                                      â”‚
â”‚ Settings Modal (Gear Icon)                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Market Analyst: [Gemini 2.0 Flash Lite â–¼]                     â”‚ â”‚
â”‚ â”‚ Idea Generator: [Gemini 2.0 Flash Lite â–¼]                     â”‚ â”‚
â”‚ â”‚ Critic:         [Gemini 2.0 Flash Lite â–¼]                     â”‚ â”‚
â”‚ â”‚ PM Refiner:     [Gemini 2.0 Flash Lite â–¼]                     â”‚ â”‚
â”‚ â”‚ Synthesizer:    [Gemini 2.0 Flash Lite â–¼]                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ Available Models:                                                    â”‚
â”‚ â€¢ Gemini 2.0 Flash Lite (default)                                   â”‚
â”‚ â€¢ Gemini 1.5 Pro                                                     â”‚
â”‚ â€¢ Gemini 1.5 Flash                                                   â”‚
â”‚ â€¢ GPT-4                                                             â”‚
â”‚ â€¢ GPT-3.5 Turbo                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Implementation Details:**

**Frontend (page.tsx):**
```typescript
const [modelSettings, setModelSettings] = useState({
  market_analyst: 'gemini-2.0-flash-lite',
  idea_generator: 'gemini-2.0-flash-lite', 
  critic: 'gemini-2.0-flash-lite',
  pm_refiner: 'gemini-2.0-flash-lite',
  synthesizer: 'gemini-2.0-flash-lite'
})

// Persisted in localStorage
localStorage.setItem('modelSettings', JSON.stringify(modelSettings))
```

**Backend (orchestrator.py):**
```python
# Each agent function accepts model_name parameter
async def _run_market_analyst(
    self, topic: str, constraints: Dict[str, Any], 
    model_name: str = 'gemini-2.0-flash-lite'
) -> Dict[str, Any]:
    model = genai.GenerativeModel(model_name)
    # ... rest of implementation
```

**API Integration:**
```python
# GenerateRequest and IterateRequest models include model_settings
class GenerateRequest(BaseModel):
    topic: str
    constraints: Dict[str, Any]
    model_settings: Optional[Dict[str, str]] = None
```

---

## ğŸ”§ Settings & Configuration Management

### **Frontend Settings State:**

```typescript
// Settings Modal Component
const SettingsModal = ({ isOpen, onClose, modelSettings, onSave }) => {
  const [localSettings, setLocalSettings] = useState(modelSettings)
  
  const handleSave = () => {
    onSave(localSettings)
    localStorage.setItem('modelSettings', JSON.stringify(localSettings))
    onClose()
  }
  
  return (
    <div className="fixed inset-0 bg-black bg-opacity-50">
      <div className="bg-white rounded-lg p-6">
        <h3>Model Settings</h3>
        {Object.entries(AGENT_MODELS).map(([agent, models]) => (
          <div key={agent}>
            <label>{agent.replace('_', ' ').toUpperCase()}</label>
            <select 
              value={localSettings[agent]}
              onChange={(e) => setLocalSettings({
                ...localSettings,
                [agent]: e.target.value
              })}
            >
              {models.map(model => (
                <option key={model} value={model}>{model}</option>
              ))}
            </select>
          </div>
        ))}
        <button onClick={handleSave}>Save Settings</button>
      </div>
    </div>
  )
}
```

### **Backend Model Routing:**

```python
# orchestrator.py - Model selection logic
market_model = model_settings.get('market_analyst', 'gemini-2.0-flash-lite') if model_settings else 'gemini-2.0-flash-lite'
idea_model = model_settings.get('idea_generator', 'gemini-2.0-flash-lite') if model_settings else 'gemini-2.0-flash-lite'
critic_model = model_settings.get('critic', 'gemini-2.0-flash-lite') if model_settings else 'gemini-2.0-flash-lite'
pm_model = model_settings.get('pm_refiner', 'gemini-2.0-flash-lite') if model_settings else 'gemini-2.0-flash-lite'
synth_model = model_settings.get('synthesizer', 'gemini-2.0-flash-lite') if model_settings else 'gemini-2.0-flash-lite'
```

---

## ğŸš€ Performance Optimizations

### **Async Agent Execution:**

```python
# Parallel agent execution for faster idea generation
async def generate_ideas(self, topic, constraints, num_ideas, model_settings):
    # Phase 1: Market Analysis (sequential - needed for other agents)
    market_analysis = await self._run_market_analyst(topic, constraints, model_name=market_model)
    
    # Phase 2: Idea Generation (parallel for multiple ideas)
    idea_tasks = []
    for i in range(num_ideas):
        task = self._run_idea_generator(topic, constraints, market_analysis, 1, model_name=idea_model)
        idea_tasks.append(task)
    
    raw_ideas = await asyncio.gather(*idea_tasks)
    
    # Phase 3: Refinement (parallel for each idea)
    refinement_tasks = []
    for idea in raw_ideas:
        task = self._refine_single_idea(idea, market_analysis, model_settings)
        refinement_tasks.append(task)
    
    refined_ideas = await asyncio.gather(*refinement_tasks)
    return refined_ideas
```

### **Caching Strategy:**

```python
# Redis caching for repeated market analysis
@lru_cache(maxsize=100)
async def _cached_market_analysis(self, topic: str, constraints_hash: str):
    # Cache market analysis for same topic + constraints
    return await self._run_market_analyst(topic, constraints)
```

### **Response Time Optimizations:**

| Component | Optimization | Impact |
|-----------|-------------|---------|
| **Frontend** | React.memo for idea cards | 30% faster re-renders |
| **API** | Async agent execution | 5x faster than sequential |
| **LLM** | Gemini 2.0 Flash Lite | 2-3s vs 10-15s (GPT-4) |
| **Database** | In-memory storage | <1ms vs 10-50ms (PostgreSQL) |
| **Vector Search** | FAISS CPU | 10ms vs 100ms (API calls) |

---

## ğŸ” Security & Privacy

### **API Security:**

```python
# CORS Configuration
CORS_ORIGINS = [
    "http://localhost:3000",
    "https://yourdomain.com"
]

# Rate Limiting
from slowapi import Limiter
limiter = Limiter(key_func=get_remote_address)

@router.post("/generate")
@limiter.limit("10/minute")
async def generate_ideas(request: Request, ...):
    # Rate limited to 10 requests per minute
```

### **Data Privacy:**

```python
# No persistent storage of user data in development
# All ideas stored in memory (resets on restart)
# No user authentication (development mode)
# No tracking of personal information
```

### **LLM API Security:**

```python
# Environment variable for API keys
GEMINI_API_KEY = os.getenv("GEMINI_API_KEY")

# No API keys in code
# Secure environment variable handling
# API key rotation support
```

---

## ğŸ“Š Analytics & Monitoring

### **Structured Logging:**

```python
# services/backend/app/core/logger.py
import structlog

logger = structlog.get_logger()

# All events logged with context
logger.info("idea_generation_started", 
           topic="AI fitness apps", 
           num_ideas=2,
           user_agent="Mozilla/5.0...")

logger.info("agent_completed",
           agent="market_analyst",
           duration_ms=1200,
           tokens_used=1500)
```

### **Performance Metrics:**

```python
# Track key metrics
analytics = {
    "idea_generation_time": 15.2,  # seconds
    "market_analysis_time": 3.1,   # seconds  
    "idea_generation_time": 4.8,    # seconds
    "critic_time": 2.1,             # seconds
    "pm_refiner_time": 2.9,         # seconds
    "synthesizer_time": 2.3,        # seconds
    "total_tokens_used": 8500,      # tokens
    "cost_usd": 0.0006             # USD
}
```

### **Error Tracking:**

```python
# Comprehensive error handling
try:
    result = await agent.run()
except GeminiAPIError as e:
    logger.error("gemini_api_error", error=str(e), agent=agent_name)
    return fallback_data
except ValidationError as e:
    logger.error("validation_error", error=str(e), data=data)
    raise HTTPException(422, detail=str(e))
except Exception as e:
    logger.error("unexpected_error", error=str(e), traceback=traceback.format_exc())
    raise HTTPException(500, detail="Internal server error")
```

---

This documentation provides a comprehensive overview of the entire system architecture, data flow, and component interactions. Each agent plays a specific role in refining and enriching startup ideas through an intelligent multi-agent pipeline powered by Gemini 2.0 Flash Lite.

